{"changed":true,"filter":false,"title":"game2.js","tooltip":"/games/game2.js","value":"var myGamePiece;\nvar myObstacles = [];\nvar myScore;\n\nfunction startGame() {\n    myGamePiece = new component(30, 30, \"red\", 10, 120);\n    myGamePiece.gravity = 0.05;\n    myScore = new component(\"30px\", \"Consolas\", \"black\", 280, 40, \"text\");\n    myGameArea.start();\n}\n\nvar myGameArea = {\n    canvas : document.createElement(\"game2\"),\n    start : function() {\n        this.canvas.width = 480;\n        this.canvas.height = 270;\n        this.context = this.canvas.getContext(\"2d\");\n        document.body.insertBefore(this.canvas, document.body.childNodes[0]);\n        this.frameNo = 0;\n        updateGameArea();\n        },\n    clear : function() {\n        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n}\n\nfunction component(width, height, color, x, y, type) {\n    this.type = type;\n    this.score = 0;\n    this.width = width;\n    this.height = height;\n    this.speedX = 0;\n    this.speedY = 0;    \n    this.x = x;\n    this.y = y;\n    this.gravity = 0;\n    this.gravitySpeed = 0;\n    this.update = function() {\n        ctx = myGameArea.context;\n        if (this.type == \"text\") {\n            ctx.font = this.width + \" \" + this.height;\n            ctx.fillStyle = color;\n            ctx.fillText(this.text, this.x, this.y);\n        } else {\n            ctx.fillStyle = color;\n            ctx.fillRect(this.x, this.y, this.width, this.height);\n        }\n    }\n    this.newPos = function() {\n        this.gravitySpeed += this.gravity;\n        this.x += this.speedX;\n        this.y += this.speedY + this.gravitySpeed;\n        this.hitBottom();\n    }\n    this.hitBottom = function() {\n        var rockbottom = myGameArea.canvas.height - this.height;\n        if (this.y > rockbottom) {\n            this.y = rockbottom;\n            this.gravitySpeed = 0;\n        }\n    }\n    this.crashWith = function(otherobj) {\n        var myleft = this.x;\n        var myright = this.x + (this.width);\n        var mytop = this.y;\n        var mybottom = this.y + (this.height);\n        var otherleft = otherobj.x;\n        var otherright = otherobj.x + (otherobj.width);\n        var othertop = otherobj.y;\n        var otherbottom = otherobj.y + (otherobj.height);\n        var crash = true;\n        if ((mybottom < othertop) || (mytop > otherbottom) || (myright < otherleft) || (myleft > otherright)) {\n            crash = false;\n        }\n        return crash;\n    }\n}\n\nfunction updateGameArea() {\n    var x, height, gap, minHeight, maxHeight, minGap, maxGap;\n    for (i = 0; i < myObstacles.length; i += 1) {\n        if (myGamePiece.crashWith(myObstacles[i])) {\n            return;\n        } \n    }\n    myGameArea.clear();\n    myGameArea.frameNo += 1;\n    if (myGameArea.frameNo == 1 || everyinterval(150)) {\n        x = myGameArea.canvas.width;\n        minHeight = 20;\n        maxHeight = 200;\n        height = Math.floor(Math.random()*(maxHeight-minHeight+1)+minHeight);\n        minGap = 50;\n        maxGap = 200;\n        gap = Math.floor(Math.random()*(maxGap-minGap+1)+minGap);\n        myObstacles.push(new component(10, height, \"green\", x, 0));\n        myObstacles.push(new component(10, x - height - gap, \"green\", x, height + gap));\n    }\n    for (i = 0; i < myObstacles.length; i += 1) {\n        myObstacles[i].x += -1;\n        myObstacles[i].update();\n    }\n    myScore.text=\"SCORE: \" + myGameArea.frameNo;\n    myScore.update();\n    myGamePiece.newPos();\n    myGamePiece.update();\n}\n\nfunction everyinterval(n) {\n    if ((myGameArea.frameNo / n) % 1 == 0) {return true;}\n    return false;\n}\n\nfunction accelerate(n) {\n    if (!myGameArea.interval) {myGameArea.interval = setInterval(updateGameArea, 20);}\n\n    myGamePiece.gravity = n;\n}","undoManager":{"mark":15,"position":16,"stack":[[{"start":{"row":0,"column":0},"end":{"row":117,"column":1},"action":"insert","lines":["var myGamePiece;","var myObstacles = [];","var myScore;","","function startGame() {","    myGamePiece = new component(30, 30, \"red\", 10, 120);","    myGamePiece.gravity = 0.05;","    myScore = new component(\"30px\", \"Consolas\", \"black\", 280, 40, \"text\");","    myGameArea.start();","}","","var myGameArea = {","    canvas : document.createElement(\"canvas\"),","    start : function() {","        this.canvas.width = 480;","        this.canvas.height = 270;","        this.context = this.canvas.getContext(\"2d\");","        document.body.insertBefore(this.canvas, document.body.childNodes[0]);","        this.frameNo = 0;","        updateGameArea();","        },","    clear : function() {","        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);","    }","}","","function component(width, height, color, x, y, type) {","    this.type = type;","    this.score = 0;","    this.width = width;","    this.height = height;","    this.speedX = 0;","    this.speedY = 0;    ","    this.x = x;","    this.y = y;","    this.gravity = 0;","    this.gravitySpeed = 0;","    this.update = function() {","        ctx = myGameArea.context;","        if (this.type == \"text\") {","            ctx.font = this.width + \" \" + this.height;","            ctx.fillStyle = color;","            ctx.fillText(this.text, this.x, this.y);","        } else {","            ctx.fillStyle = color;","            ctx.fillRect(this.x, this.y, this.width, this.height);","        }","    }","    this.newPos = function() {","        this.gravitySpeed += this.gravity;","        this.x += this.speedX;","        this.y += this.speedY + this.gravitySpeed;","        this.hitBottom();","    }","    this.hitBottom = function() {","        var rockbottom = myGameArea.canvas.height - this.height;","        if (this.y > rockbottom) {","            this.y = rockbottom;","            this.gravitySpeed = 0;","        }","    }","    this.crashWith = function(otherobj) {","        var myleft = this.x;","        var myright = this.x + (this.width);","        var mytop = this.y;","        var mybottom = this.y + (this.height);","        var otherleft = otherobj.x;","        var otherright = otherobj.x + (otherobj.width);","        var othertop = otherobj.y;","        var otherbottom = otherobj.y + (otherobj.height);","        var crash = true;","        if ((mybottom < othertop) || (mytop > otherbottom) || (myright < otherleft) || (myleft > otherright)) {","            crash = false;","        }","        return crash;","    }","}","","function updateGameArea() {","    var x, height, gap, minHeight, maxHeight, minGap, maxGap;","    for (i = 0; i < myObstacles.length; i += 1) {","        if (myGamePiece.crashWith(myObstacles[i])) {","            return;","        } ","    }","    myGameArea.clear();","    myGameArea.frameNo += 1;","    if (myGameArea.frameNo == 1 || everyinterval(150)) {","        x = myGameArea.canvas.width;","        minHeight = 20;","        maxHeight = 200;","        height = Math.floor(Math.random()*(maxHeight-minHeight+1)+minHeight);","        minGap = 50;","        maxGap = 200;","        gap = Math.floor(Math.random()*(maxGap-minGap+1)+minGap);","        myObstacles.push(new component(10, height, \"green\", x, 0));","        myObstacles.push(new component(10, x - height - gap, \"green\", x, height + gap));","    }","    for (i = 0; i < myObstacles.length; i += 1) {","        myObstacles[i].x += -1;","        myObstacles[i].update();","    }","    myScore.text=\"SCORE: \" + myGameArea.frameNo;","    myScore.update();","    myGamePiece.newPos();","    myGamePiece.update();","}","","function everyinterval(n) {","    if ((myGameArea.frameNo / n) % 1 == 0) {return true;}","    return false;","}","","function accelerate(n) {","    if (!myGameArea.interval) {myGameArea.interval = setInterval(updateGameArea, 20);}","","    myGamePiece.gravity = n;","}"],"id":1}],[{"start":{"row":12,"column":37},"end":{"row":12,"column":43},"action":"remove","lines":["canvas"],"id":2},{"start":{"row":12,"column":37},"end":{"row":12,"column":38},"action":"insert","lines":["g"]},{"start":{"row":12,"column":38},"end":{"row":12,"column":39},"action":"insert","lines":["a"]},{"start":{"row":12,"column":39},"end":{"row":12,"column":40},"action":"insert","lines":["m"]},{"start":{"row":12,"column":40},"end":{"row":12,"column":41},"action":"insert","lines":["e"]},{"start":{"row":12,"column":41},"end":{"row":12,"column":42},"action":"insert","lines":["2"]}],[{"start":{"row":117,"column":1},"end":{"row":118,"column":0},"action":"insert","lines":["",""],"id":3},{"start":{"row":118,"column":0},"end":{"row":119,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":119,"column":0},"end":{"row":119,"column":1},"action":"insert","lines":["s"],"id":4},{"start":{"row":119,"column":1},"end":{"row":119,"column":2},"action":"insert","lines":["t"]},{"start":{"row":119,"column":2},"end":{"row":119,"column":3},"action":"insert","lines":["a"]},{"start":{"row":119,"column":3},"end":{"row":119,"column":4},"action":"insert","lines":["r"]},{"start":{"row":119,"column":4},"end":{"row":119,"column":5},"action":"insert","lines":["t"]}],[{"start":{"row":119,"column":0},"end":{"row":119,"column":5},"action":"remove","lines":["start"],"id":5},{"start":{"row":119,"column":0},"end":{"row":119,"column":11},"action":"insert","lines":["startGame()"]}],[{"start":{"row":119,"column":11},"end":{"row":119,"column":12},"action":"insert","lines":[";"],"id":6}],[{"start":{"row":119,"column":11},"end":{"row":119,"column":12},"action":"remove","lines":[";"],"id":7},{"start":{"row":119,"column":10},"end":{"row":119,"column":11},"action":"remove","lines":[")"]},{"start":{"row":119,"column":9},"end":{"row":119,"column":10},"action":"remove","lines":["("]},{"start":{"row":119,"column":8},"end":{"row":119,"column":9},"action":"remove","lines":["e"]},{"start":{"row":119,"column":7},"end":{"row":119,"column":8},"action":"remove","lines":["m"]},{"start":{"row":119,"column":6},"end":{"row":119,"column":7},"action":"remove","lines":["a"]}],[{"start":{"row":119,"column":5},"end":{"row":119,"column":6},"action":"remove","lines":["G"],"id":8},{"start":{"row":119,"column":4},"end":{"row":119,"column":5},"action":"remove","lines":["t"]},{"start":{"row":119,"column":3},"end":{"row":119,"column":4},"action":"remove","lines":["r"]}],[{"start":{"row":119,"column":2},"end":{"row":119,"column":3},"action":"remove","lines":["a"],"id":9},{"start":{"row":119,"column":1},"end":{"row":119,"column":2},"action":"remove","lines":["t"]},{"start":{"row":119,"column":0},"end":{"row":119,"column":1},"action":"remove","lines":["s"]}],[{"start":{"row":119,"column":0},"end":{"row":119,"column":1},"action":"insert","lines":["f"],"id":10},{"start":{"row":119,"column":1},"end":{"row":119,"column":2},"action":"insert","lines":["u"]},{"start":{"row":119,"column":2},"end":{"row":119,"column":3},"action":"insert","lines":["n"]},{"start":{"row":119,"column":3},"end":{"row":119,"column":4},"action":"insert","lines":["c"]},{"start":{"row":119,"column":4},"end":{"row":119,"column":5},"action":"insert","lines":["t"]},{"start":{"row":119,"column":5},"end":{"row":119,"column":6},"action":"insert","lines":["i"]},{"start":{"row":119,"column":6},"end":{"row":119,"column":7},"action":"insert","lines":["o"]},{"start":{"row":119,"column":7},"end":{"row":119,"column":8},"action":"insert","lines":["n"]}],[{"start":{"row":119,"column":8},"end":{"row":119,"column":9},"action":"insert","lines":[" "],"id":11},{"start":{"row":119,"column":9},"end":{"row":119,"column":10},"action":"insert","lines":["s"]},{"start":{"row":119,"column":10},"end":{"row":119,"column":11},"action":"insert","lines":["t"]},{"start":{"row":119,"column":11},"end":{"row":119,"column":12},"action":"insert","lines":["a"]},{"start":{"row":119,"column":12},"end":{"row":119,"column":13},"action":"insert","lines":["r"]}],[{"start":{"row":119,"column":9},"end":{"row":119,"column":13},"action":"remove","lines":["star"],"id":12},{"start":{"row":119,"column":9},"end":{"row":119,"column":20},"action":"insert","lines":["startGame()"]}],[{"start":{"row":119,"column":20},"end":{"row":119,"column":21},"action":"insert","lines":[";"],"id":13}],[{"start":{"row":119,"column":20},"end":{"row":119,"column":21},"action":"remove","lines":[";"],"id":14}],[{"start":{"row":119,"column":20},"end":{"row":119,"column":21},"action":"insert","lines":["{"],"id":15}],[{"start":{"row":119,"column":21},"end":{"row":121,"column":1},"action":"insert","lines":["","    ","}"],"id":16}],[{"start":{"row":119,"column":0},"end":{"row":121,"column":1},"action":"remove","lines":["function startGame(){","    ","}"],"id":17}]]},"ace":{"folds":[],"scrolltop":1637,"scrollleft":0,"selection":{"start":{"row":119,"column":0},"end":{"row":119,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":101,"state":"no_regex","mode":"ace/mode/javascript"}},"timestamp":1573158941816}