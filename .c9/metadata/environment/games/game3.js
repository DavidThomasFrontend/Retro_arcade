{"changed":true,"filter":false,"title":"game3.js","tooltip":"/games/game3.js","value":"var canvas = document.getElementById('myCanvas');\nvar ctx = canvas.getContext('2d');\n\nvar x = canvas.width/2;\nvar y = canvas.height - 30;\nvar dx = 2;\nvar dy = -2;\nvar ballRadius = 10;\nvar paddleHeight = 10;\nvar paddleWidth = 75;\nvar paddleX = (canvas.width-paddleWidth)/2;\nvar rightPressed = false;\nvar leftPressed = false;\nvar brickRowCount = 3;\nvar brickColumnCount = 5;\nvar brickWidth = 75;\nvar brickHeight = 20;\nvar brickPadding = 10;\nvar brickOffsetTop = 30;\nvar brickOffsetLeft = 30;\nvar score = 0;\nvar lives = 3;\n\nvar bricks = [];\nfor (c=0; c<brickColumnCount; c++) {\n\tbricks[c] = [];\n\tfor (r=0; r<brickRowCount; r++) {\n\t\tbricks[c][r] = {x: 0, y:0, status: 1};\n\t}\n}\n\ndocument.addEventListener(\"keydown\", keyDownHandler);\ndocument.addEventListener(\"keyup\", keyUpHandler);\n\nfunction drawBricks() {\n\tfor(c=0; c<brickColumnCount; c++) {\n\t\tfor(r=0; r<brickRowCount; r++) {\n\t\t\tif(bricks[c][r].status == 1) {\n\t\t\t\tvar brickX = (c*(brickWidth+brickPadding))+brickOffsetLeft;\n\t\t\t\tvar brickY = (r*(brickHeight+brickPadding))+brickOffsetTop;\n\t\t\t\tbricks[c][r].x = brickX;\n\t\t\t\tbricks[c][r].y = brickY;\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.rect(brickX, brickY, brickWidth, brickHeight);\n\t\t\t\tctx.fillStyle = \"#0095DD\";\n\t\t\t\tctx.fill();\n\t\t\t\tctx.closePath();\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction keyDownHandler(e) {\n\tif(e.keyCode == 39) {\n\t\trightPressed = true;\n\t}\n\telse if(e.keyCode == 37) {\n\t\tleftPressed = true;\n\t}\n}\n\nfunction keyUpHandler(e) {\n\tif(e.keyCode == 39) {\n\t\trightPressed = false;\n\t}\n\telse if(e.keyCode == 37) {\n\t\tleftPressed = false;\n\t}\n}\n\nfunction drawBall() {\n\tctx.beginPath();\n\tctx.arc(x, y, ballRadius, 0, Math.PI*2);\n\tctx.fillStyle = \"#0095DD\";\n\tctx.fill();\n\tctx.closePath();\n}\n\nfunction drawPaddle() {\n\tctx.beginPath();\n\tctx.rect(paddleX, canvas.height-paddleHeight, paddleWidth, paddleHeight);\n\tctx.fillStyle = \"#0095DD\";\n\tctx.fill();\n\tctx.closePath();\n}\n\nfunction collisionDetection() {\n\tfor(c=0; c<brickColumnCount; c++){\n\t\tfor(r=0; r<brickRowCount; r++){\n\t\t\tvar b = bricks[c][r];\n\t\t\tif(b.status  == 1) {\n\t\t\t\tif(x > b.x && x < b.x+brickWidth && y > b.y && y < b.y+brickHeight) {\n\t\t\t\t\tdy = -dy;\n\t\t\t\t\tb.status = 0;\n\t\t\t\t\tscore++;\n\t\t\t\t\tif(score == brickRowCount*brickColumnCount) {\n\t\t\t\t\t\talert(\"YOU WIN, CONGRADULATIONS!\");\n\t\t\t\t\t\tdocument.location.reload();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction drawScore () {\n\tctx.font = \"16px Arial\";\n\tctx.fillStyle = \"#0095DD\";\n\tctx.fillText(\"Score: \"+score, 8, 20);\n}\n\nfunction drawLives() {\n\tctx.font = \"16px Arial\";\n\tctx.fillStyle = \"#0095DD\";\n\tctx.fillText(\"Lives: \"+lives, canvas.width-65, 20);\n}\n\nfunction draw() {\n\tctx.clearRect(0,0, canvas.width, canvas.height);\n\tdrawBricks()\n\tdrawBall();\n\tdrawPaddle();\n\tdrawScore();\n\tdrawLives();\n\tcollisionDetection();\n\n\tif(y + dy < ballRadius) {\n\t\tdy = -dy;\n\t} else if (y + dy > canvas.height-ballRadius) {\n\t\tif(x > paddleX && x < paddleX + paddleWidth) {\n\t\t\tdy = -dy;\n\t\t} else {\n\t\t\tlives--;\n\t\t\tif(!lives) {\n\t\t\t\talert(\"GAME OVER!\");\n\t\t\t\tdocument.location.reload();\n\t\t\t} else {\n\t\t\t\tx = canvas.width/2;\n\t\t\t\ty = canvas.height-30;\n\t\t\t\tdx = 2;\n\t\t\t\tdy = -2;\n\t\t\t\tpaddleX = (canvas.width-paddleWidth)/2;\n\t\t\t}\n\t\t}\n\t}\n\tif(x + dx > canvas.width-ballRadius || x + dx < ballRadius) {\n\t\tdx = -dx;\n\t}\n\n\tif(rightPressed && paddleX < canvas.width-paddleWidth) {\n\t\tpaddleX += 7;\n\t}\n\telse if(leftPressed && paddleX > 0) {\n\t\tpaddleX -= 7;\n\t}\n\n\tx += dx;\n\ty += dy;\n\trequestAnimationFrame(draw);\n}\n\ndocument.addEventListener(\"mousemove\", mouseMoveHandler);\n\nfunction mouseMoveHandler(e) {\n\tvar relativeX = e.clientX - canvas.offsetLeft;\n\tif(relativeX > 0+paddleWidth/2 && relativeX < canvas.width-paddleWidth/2) {\n\t\tpaddleX = relativeX - paddleWidth/2;\n\t}\n}\n\ndraw();","undoManager":{"mark":1,"position":3,"stack":[[{"start":{"row":0,"column":45},"end":{"row":0,"column":46},"action":"remove","lines":["s"],"id":2},{"start":{"row":0,"column":44},"end":{"row":0,"column":45},"action":"remove","lines":["a"]},{"start":{"row":0,"column":43},"end":{"row":0,"column":44},"action":"remove","lines":["v"]},{"start":{"row":0,"column":42},"end":{"row":0,"column":43},"action":"remove","lines":["n"]},{"start":{"row":0,"column":41},"end":{"row":0,"column":42},"action":"remove","lines":["a"]},{"start":{"row":0,"column":40},"end":{"row":0,"column":41},"action":"remove","lines":["C"]},{"start":{"row":0,"column":39},"end":{"row":0,"column":40},"action":"remove","lines":["y"]},{"start":{"row":0,"column":38},"end":{"row":0,"column":39},"action":"remove","lines":["m"]}],[{"start":{"row":0,"column":38},"end":{"row":0,"column":39},"action":"insert","lines":["g"],"id":3},{"start":{"row":0,"column":39},"end":{"row":0,"column":40},"action":"insert","lines":["a"]},{"start":{"row":0,"column":40},"end":{"row":0,"column":41},"action":"insert","lines":["m"]},{"start":{"row":0,"column":41},"end":{"row":0,"column":42},"action":"insert","lines":["e"]},{"start":{"row":0,"column":42},"end":{"row":0,"column":43},"action":"insert","lines":["3"]}],[{"start":{"row":0,"column":37},"end":{"row":0,"column":38},"action":"remove","lines":["'"],"id":4}],[{"start":{"row":0,"column":37},"end":{"row":0,"column":38},"action":"insert","lines":["'"],"id":5}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":0,"column":38},"end":{"row":0,"column":38},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1572988653529}